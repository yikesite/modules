<div id="sitemap">
  <!-- Begin Level 1 Tree Nodes -->
  <ul class="level1">
    {% for p in page.menu %}
      {% unless p.is_hidden? %}
        <li><a href="{{ p.url }}">{{ p.name }}</a></li>
          {% for f in p.files %}
            {% if forloop.first %}<ul>{% endif %}
              <li>(<a href="{{f.src}}">{{f.title}}</a>)</li>        
            {% if forloop.last %}</ul>{% endif %}         
          {% endfor %}
          {% for i in p.images %}
            {% if forloop.first %}<ul>{% endif %}
              <li>[<a href="{{i.src}}">{{i.title}}</a>]</li>        
            {% if forloop.last %}</ul>{% endif %}         
          {% endfor %}        
        
        {% if p.has_visible_children? %}
          <li class="sub">
            
            <!-- Begin Level 2 Tree Nodes -->
            <ul class="level2">
              {% for pp in p.visible_children %}
                <li><a href="{{ pp.url }}">{{ pp.name }}</a></li>
                {% for ff in pp.files %}
		          {% if forloop.first %}<ul>{% endif %}
		          <li>(<a href="{{ff.src}}">{{ff.title}}</a>)</li>      
		          {% if forloop.last %}</ul>{% endif %}         
		        {% endfor %}               
                {% for ii in pp.images %}
		          {% if forloop.first %}<ul>{% endif %}
		          <li>[<a href="{{ii.src}}">{{ii.title}}</a>]</li>      
		          {% if forloop.last %}</ul>{% endif %}         
		        {% endfor %}     
		                     
                {% if pp.has_visible_children? %} 
                  <li class="sub">
            
                    
                    <!-- Begin Level 3 Tree Nodes -->
                    <ul class="level3">
                      {% for ppp in pp.visible_children %}
                        <li><a href="{{ ppp.url }}">{{ ppp.name }}</a></li>
                        {% for fff in ppp.files %}
				          {% if forloop.first %}<ul>{% endif %}
				          <li>(<a href="{{fff.src}}">{{fff.title}}</a>)</li>        
				          {% if forloop.last %}</ul>{% endif %}         
				        {% endfor %} 
                        {% for iii in ppp.images %}
				          {% if forloop.first %}<ul>{% endif %}
				          <li>[<a href="{{iii.src}}">{{iii.title}}</a>]</li>        
				          {% if forloop.last %}</ul>{% endif %}         
				        {% endfor %}                         
                        
                        {% if ppp.has_visible_children? %} 
                          <li class="sub">

                            <!-- Begin Level 4 Tree Nodes -->
                            <ul class="level4">
                              {% for pppp in ppp.visible_children %}
                                <li><a href="{{ pppp.url }}">{{ pppp.name }}</a></li>
                                {% for ffff in pppp.files %}
						          {% if forloop.first %}<ul>{% endif %}
						          <li>(<a href="{{ffff.src}}">{{ffff.title}}</a>)</li>        
						          {% if forloop.last %}</ul>{% endif %}         
						        {% endfor %} 
                                {% for iiii in pppp.images %}
						          {% if forloop.first %}<ul>{% endif %}
						          <li>(<a href="{{iiii.src}}">{{iiii.title}}</a>)</li>        
						          {% if forloop.last %}</ul>{% endif %}         
						        {% endfor %} 		                                
                                
                                {% if pppp.has_visible_children? %} 
                                  <li class="sub">
 
                                    <!-- Begin Level 5 Tree Nodes -->
                                    <ul class="level5">
                                      {% for ppppp in pppp.visible_children %}
                                        <li><a href="{{ ppppp.url }}">{{ ppppp.name }}</a></li>
                                        {% for fffff in ppppp.files %}
								          {% if forloop.first %}<ul>{% endif %}
								          <li>(<a href="{{fffff.src}}">{{fffff.title}}</a>)</li>          
								          {% if forloop.last %}</ul>{% endif %} 
								        {% endfor %}
                                        {% for iiiii in ppppp.images %}
								          {% if forloop.first %}<ul>{% endif %}
								          <li>(<a href="{{iiiii.src}}">{{iiiii.title}}</a>)</li>          
								          {% if forloop.last %}</ul>{% endif %} 
								        {% endfor %}								        
								        
								        
                                        {% if pppp.has_visible_children? %} 
                                          <!-- <li class="sub">
 
                            
                                          </li> -->
                                        {% endif %}
                                      {% endfor %}
                                    </ul>
                            
                                 </li> 
                                {% endif %}
                              {% endfor %}
                            </ul>
                    
                          </li>
                        {% endif %}
                      {% endfor %}
                    </ul>                    
                    
                  </li>
                {% endif %}
              {% endfor %}
            </ul>
            
          </li>
        {% endif %}
      {% endunless %}
    {% endfor %}
  </ul>
</div>